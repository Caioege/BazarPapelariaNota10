@model BazarPapelaria10.Models.ViewModels.IndexViewModel;
@{ 
    ViewData["Title"] = "Bazar e Papelaria Nota 10";
    var pesquisa = Context.Request.Query["pesquisa"];
    var ordenacao = Context.Request.Query["ordenacao"].ToString();
}

@using X.PagedList;

<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv=”content-type” content="text/html;" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="keywords" content="papelaria, nota 10, bazar, materiais, escolares, livros, cadernos" />
    <meta name="author" content="Caio Henrick de Oliveira, Willian Santos Silva,Yure Silva Cunha">
    <title>Bazar e Papelaria Nota 10</title>
    <meta name="description" content="Site destinado ao e-commerce de produtos da loja em questão e trabalho de conclusão do curso de ADS">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="~/imagens\_logo/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="~/imagens\_logo/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="~/imagens\_logo/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="~/imagens\_logo/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="~/imagens\_logo/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="~/imagens\_logo/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="~/imagens\_logo/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="~/imagens\_logo/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="~/imagens\_logo/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="~/imagens\_logo/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="~/imagens\_logo/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="~/imagens\_logo/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="~/imagens\_logo/favicon-16x16.png">
    <link rel="manifest" href="~/imagens\_logo/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="~/imagens\_logo/ms-icon-144x144.png">
    <meta name="theme-color" content="#2c6bd8">

    <!-- ARQUIVOS DE ESTILO -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

</head>

<body>
    <main>
        <!-- Sessão Principal -->
        <!-- Início catálogo de produtos -->
        <!-- Page Content -->
        <div class="container" style="margin-top:50px">

            @if (string.IsNullOrEmpty(pesquisa))
            {
                <!-- INICIO PRIMEIRO CARROSSEL -->

                <div id="carouselExampleCaptions" class="carousel slide " data-ride="carousel">
                    <ol class="carousel-indicators">
                        <li data-target="#carouselExampleCaptions" data-slide-to="0" class="active"></li>
                        <li data-target="#carouselExampleCaptions" data-slide-to="1"></li>
                    </ol>
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <img src="~/images/carrossel1.png" class="d-block w-100" alt="..." runat="server">
                            <div class="carousel-caption d-none d-md-block">
                                <h5></h5>
                                <p></p>
                            </div>
                        </div>
                        <div class="carousel-item">
                            <img src="~/images/carrossel2.png" class="d-block w-100" alt="...">
                            <div class="carousel-caption d-none d-md-block">
                                <h5></h5>
                                <p></p>
                            </div>
                        </div>
                    </div>
                    <a class="carousel-control-prev" href="#carouselExampleCaptions" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Anterior</span>
                    </a>
                    <a class="carousel-control-next" href="#carouselExampleCaptions" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="sr-only">Próximo</span>
                    </a>
                </div>

                <!-- FIM PRIMEIRO CARROSSEL -->
            }

            @if (Model.lista.Count > 0)
            {

                <div class="row" style="margin-top:10px;">
                    <div class="offset-md-10 col-md-2">
                        <select id="ordenacao"asp-for="@ordenacao" class="form-control" asp-items="Model.ordenacao"></select>
                    </div>
                </div>

                <div class="row" style="margin-top:50px">
                    @foreach (var produto in Model.lista)
                    {
                        <div class="col-lg-3 col-md-6 mb-4" value="@produto.Id">
                            <div class="card h-100">
                                <a>
                                    @if (produto.Imagens != null && produto.Imagens.Count() > 0)
                                    {
                                        <img class="card-img-top" src="@Url.Content(produto.Imagens.FirstOrDefault().Caminho)" alt="">
                                    }
                                    else
                                    {
                                        <img class="card-img-top" src="~/images/semimagem.jpg" alt="">
                                    }
                                </a>
                                <div class="card-body">
                                    <h4 class="card-title text-center">
                                        @Html.ActionLink(produto.ToLower(produto.Nomeprod), "Produto", new { produto, Prod = UrlSlugger.ToUrlSlug(produto.Nomeprod) })
                                    </h4>
                                    <h5 class="text-center">@produto.Valorprod.ToString("C")</h5>

                                    @if (produto.Descprod != null)
                                    {
                                        <p class="card-text">@produto.Descprod</p>
                                    }
                                    else
                                    {
                                        <p class="card-text text-center">Produto sem descrição.</p>
                                    }
                                </div>
                                <div class="card-footer text-center">
                                    <small class="text-muted">&#9733; &#9733; &#9733; &#9733; &#9734;</small>
                                </div>
                            </div>
                        </div>
                    }
                </div>
                <div style="margin-left:auto; margin-right: auto;">
                    <div class="offset-md-3 col-md-6">
                        @Html.PagedListPager((IPagedList)Model.lista, pagina => Url.Action("Index", new { pagina = pagina, pesquisa = pesquisa, ordenacao = ordenacao }))
                    </div>
                </div>
            }
            <!-- /.container -->
        </div>
        <!-- Fim catálogo de produtos -->
    </main>
</body>
</html>